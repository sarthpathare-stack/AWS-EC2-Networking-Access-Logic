EC2 Boot Executor Simulation (User Data Execution)

⚠️ Note
This code is NOT production-grade.
It exists only to simulate EC2 behavior programmatically and to prove conceptual understanding, not to mirror AWS internals.

1️⃣ Code Explanation (What the Code Is Doing)

This simulation models how EC2 executes a user data script during instance boot.

Core Flow:
Accepts a user data script as input
Breaks the script into ordered steps
Executes each step sequentially
Ignores failures (no crash, no retry)
Marks the instance as RUNNING regardless of execution result

Behavioral Mapping:
Simulation Logic	EC2 Reality
Execute once	User data runs only on first boot
Sequential steps	Shell script executes top → bottom
Silent failure	EC2 does not block launch
RUNNING state	Instance state independent of script
Root execution	User data runs as root
No retry	AWS does not retry failed user data

The simulator intentionally does not validate success, because EC2 does not either.

2️⃣ Why This Matters (Architectural Importance)

User data is one of the most dangerous and misunderstood EC2 features.
Real-World Failure Pattern
Instance shows RUNNING
Health checks fail
Application missing
Auto Scaling replaces instances endlessly
Root cause: broken user data script
This simulation explains why that happens.

3️⃣ What I Learned From This Simulation
Key Takeaways:
EC2 boot success ≠ application success
User data is best-effort, not guaranteed
Silent failures are normal
Logging is critical (cloud-init.log)
Heavy boot logic is fragile
Architectural Insight
If your system depends on user data succeeding, your design is already weak.
This pushes toward:
Pre-baked AMIs
Immutable infrastructure

Health checks at application level

4️⃣ Mental Model (How to Think About It)
Correct Mental Model
Think of user data as:
“A one-time shell script thrown into a black hole during boot.”

EC2:
Does not wait
Does not validate
Does not retry
Does not care

Execution Diagram (Mental Flow)
INSTANCE LAUNCH
      |
      v
USER DATA STARTS (root)
      |
      v
Step 1 → Step 2 → Step 3
      |
   (error?)
      |
      v
ERROR IGNORED
      |
      v
INSTANCE STATE = RUNNING
